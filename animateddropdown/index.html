<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Animated Dropdown</title>

    <link href="css/style.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <nav class = "top">
      <div class = "dropdownBackground">
        <span class = "arrow"></span><!-- A small triangle-arrow on a top of pop-up menu-->
      </div>
      <ul class = "cool">
        <li>
          <a href = "#">About me</a>
          <div class = "dropdown dropdown1">
            <div class = "bio">
              <img src = "https://logo.clearbit.com/wesbos.com">
              <p> Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
              tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
              quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
              consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
              cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
              proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
            </div>
          </div>
        </li>
        <li>
          <a href = "#">Courses</a>
          <ul class = "dropdown courses">
            <li>
              <span class = "code">React</span>
              <a href = "https://reactforbeginners.com">React for beginners</a>
            </li>
            <li>
              <span class = "code">ES6</span>
              <a href = "https://es6.io">ES6 for beginners</a>
            </li>
            <li>
              <span class = "code">Sublime Text</span>
              <a href = "https://sublimetextbook.com">Sublime Text Power User</a>
            </li>
            <li>
              <span class = "code">Flexbox</span>
              <a href = "https://flexbox.io">Flexbox</a>
            </li>
          </ul>
        </li>
        <li>
          <a href = "#">Other Links</a>
          <ul class = "dropdown dropdown3">
            <li><a class = "button" href = "http://twitter.com/wesbos">Twitter</a></li>
            <li><a class = "button" href = "http://facebook.com/wesbos.developer">Facebook</a></li>
            <li><a class = "button" href = "http://wesbos.com">Blog</a></li>
            <li><a class = "button" href = "http://wesbos.com/courses">Course Catalog</a></li>
            </li>
          </ul>
        </li>
      </ul>
    </nav>

    <script type="text/javascript">
      const triggers = document.querySelectorAll('.cool > li');
      const background = document.querySelector('.dropdownBackground');
      const nav = document.querySelector('.top');

      function handleEnter() {
        this.classList.add('trigger-enter');
        setTimeout(() => {
          //console.log(this);
          if (this.classList.contains('trigger-enter')) {
            this.classList.add('trigger-enter-active');
          }
        }, 200);

        background.classList.add('open');
        const dropdown = this.querySelector('.dropdown');
        const dropdownCoords = dropdown.getBoundingClientRect();
        const navCoords = nav.getBoundingClientRect();
        const coords = {
          height: dropdownCoords.height,
          width: dropdownCoords.width,
          top: dropdownCoords.top - navCoords.top,
          left: dropdownCoords.left - navCoords.left
        };

        background.style.setProperty('width', `${coords.width}px`);
        background.style.setProperty('height', `${coords.height}px`);
        background.style.setProperty('transform', `translate(${coords.left}px, ${coords.top}px)`);
      };

      function handleLeave() {
        this.classList.remove('trigger-enter');
        setTimeout(() => {
          this.classList.remove('trigger-enter-active');
        }, 200);
        background.classList.remove('open');
      };

      triggers.forEach(trigger => trigger.addEventListener('mouseenter', handleEnter));
      triggers.forEach(trigger => trigger.addEventListener('mouseleave', handleLeave));

    </script>

  </body>
</html>